{% extends "base.html" %}

{% block title %}Modules - WhereTF?{% endblock %}

{% block content %}
<div class="page-header">
    <h1>üì¶ Storage Modules</h1>
    <a href="{{ url_for('modules.new_module') }}" class="btn btn-primary">+ Add Module</a>
</div>

{% if modules %}
<div class="modules-list">
    {% for module in modules %}
    <div class="module-item">
        <div class="module-header">
            <h2>
                <a href="{{ url_for('modules.view_module', module_id=module.id) }}">
                    {{ module.name }}
                </a>
            </h2>
            <div class="module-actions">
                <a href="{{ url_for('modules.view_module', module_id=module.id) }}" class="btn btn-sm">View</a>
                <a href="{{ url_for('modules.edit_module', module_id=module.id) }}" class="btn btn-sm">Edit</a>
            </div>
        </div>
        
        {% if module.description %}
        <p class="module-description">{{ module.description }}</p>
        {% endif %}
        
        {% if module.location_description %}
        <p class="module-location">üìç {{ module.location_description }}</p>
        {% endif %}
        
        <div class="module-stats">
            <span class="badge">{{ module.levels|length }} levels</span>
            {% set total_locations = module.levels|map(attribute='locations')|map('length')|sum %}
            <span class="badge">{{ total_locations }} locations</span>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <p>No modules yet. Create your first storage module to get started!</p>
    <a href="{{ url_for('modules.new_module') }}" class="btn btn-primary">+ Add Module</a>
</div>
{% endif %}
{% endblock %}
