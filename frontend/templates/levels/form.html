{% extends "base.html" %}

{% block title %}{% if level %}Edit{% else %}New{% endif %} Level - {{ module.name }} - WhereTF?{% endblock %}

{% block content %}
<div class="page-header">
    <h1>{% if level %}Edit Level{% else %}Add Level to {{ module.name }}{% endif %}</h1>
</div>

<form method="POST" class="form">
    <div class="form-group">
        <label for="level_number">Level Number *</label>
        <input type="number" id="level_number" name="level_number" value="{{ level.level_number if level else '' }}" required min="1">
        <small>Numeric level identifier (1, 2, 3, etc.)</small>
    </div>

    <div class="form-group">
        <label for="name">Name (optional)</label>
        <input type="text" id="name" name="name" value="{{ level.name if level else '' }}">
        <small>Optional custom name for this level</small>
    </div>

    <div class="form-group">
        <label for="rows">Rows *</label>
        <input type="number" id="rows" name="rows" value="{{ level.rows if level else 1 }}" required min="1" max="26">
        <small>Number of rows (A, B, C... up to Z)</small>
    </div>

    <div class="form-group">
        <label for="columns">Columns *</label>
        <input type="number" id="columns" name="columns" value="{{ level.columns if level else 1 }}" required min="1">
        <small>Number of columns (1, 2, 3...)</small>
    </div>

    <div class="form-group">
        <label for="description">Description</label>
        <textarea id="description" name="description" rows="3">{{ level.description if level else '' }}</textarea>
        <small>Optional description</small>
    </div>

    {% if level %}
    <div class="alert alert-warning">
        <strong>Note:</strong> Changing the grid size will delete all existing locations and recreate them.
    </div>
    {% endif %}

    <div class="form-actions">
        <button type="submit" class="btn btn-primary">{% if level %}Update{% else %}Create{% endif %} Level</button>
        <a href="{% if level %}{{ url_for('modules.view_level', level_id=level.id) }}{% else %}{{ url_for('modules.view_module', module_id=module.id) }}{% endif %}" class="btn btn-secondary">Cancel</a>
    </div>
</form>

{% if level %}
<div class="danger-zone">
    <h3>Danger Zone</h3>
    <p>Deleting this level will also delete all its locations. This action cannot be undone.</p>
    <form method="POST" action="{{ url_for('modules.delete_level', level_id=level.id) }}" onsubmit="return confirm('Are you sure you want to delete this level? This will also delete all locations.');">
        <button type="submit" class="btn btn-danger">Delete Level</button>
    </form>
</div>
{% endif %}
{% endblock %}
