<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}WhereTF?{% endblock %}</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="{{ url_for('main.index') }}">
                    <img src="{{ url_for('static', filename='img/logo.svg') }}" alt="WhereTF?" class="logo">
                </a>
            </div>
            <div class="nav-actions">
                <a href="{{ url_for('items.new_item') }}" class="btn btn-primary btn-add-item">+ Item</a>
            </div>
        </div>
    </nav>

    <main class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }}">
                            {{ message|safe }}
                            <button class="alert-close" onclick="this.parentElement.style.display='none'">&times;</button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-nav">
                <a href="{{ url_for('modules.list_modules') }}" class="footer-nav-btn">ğŸ“¦ Modules</a>
                <a href="{{ url_for('locations.list_locations') }}" class="footer-nav-btn">ğŸ“ Locations</a>
                <a href="{{ url_for('duplicates.list_duplicates') }}" class="footer-nav-btn">ğŸ”„ Duplicates</a>
                <a href="{{ url_for('admin.index') }}" class="footer-nav-btn">âš™ï¸ Admin</a>
            </div>
            {% if stats %}
            <div class="footer-stats">
                <span class="footer-stat">
                    <a href="{{ url_for('search.search') }}" class="footer-stat-link"><strong>{{ stats.total_items }}</strong> items</a>
                </span>
                <span class="footer-stat-separator">â€¢</span>
                <span class="footer-stat">
                    <a href="{{ url_for('locations.list_locations') }}" class="footer-stat-link"><strong>{{ stats.occupied_locations }}/{{ stats.total_locations }}</strong> locations</a> used
                </span>
                <span class="footer-stat-separator">â€¢</span>
                <span class="footer-stat">
                    <strong>{{ stats.occupancy_percent }}%</strong> occupied
                </span>
            </div>
            {% endif %}
            <p>&copy; 2024 WhereTF? | Bin there, found that.</p>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
